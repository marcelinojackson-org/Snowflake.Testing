name: Snowflake RunSQL Marketplace Check

on:
  workflow_dispatch:

permissions:
  contents: read

jobs:
  runsql-marketplace:
    runs-on: ubuntu-latest
    steps:
      - name: Execute Select current_schema via published action
        uses: marcelinojackson-org/Snowflake.RunSQLAction@v1.0.2
        with:
          sql: "select current_schema() as CURRENT_SCHEMA"
        env:
          SNOWFLAKE_ACCOUNT: ${{ vars.SNOWFLAKE_ACCOUNT }}
          SNOWFLAKE_ACCOUNT_URL: ${{ vars.SNOWFLAKE_ACCOUNT_URL }}
          SNOWFLAKE_USER: ${{ vars.SNOWFLAKE_USER }}
          SNOWFLAKE_PASSWORD: ${{ secrets.SNOWFLAKE_PASSWORD || secrets.SNOWFLAKE_PAT }}
          SNOWFLAKE_ROLE: ${{ vars.SNOWFLAKE_ROLE }}
          SNOWFLAKE_WAREHOUSE: ${{ vars.SNOWFLAKE_WAREHOUSE }}
          SNOWFLAKE_DATABASE: ${{ vars.SNOWFLAKE_DATABASE }}
          SNOWFLAKE_SCHEMA: ${{ vars.SNOWFLAKE_SCHEMA }}
